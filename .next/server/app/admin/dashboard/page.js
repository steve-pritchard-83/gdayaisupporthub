(()=>{var e={};e.id=427,e.ids=[427],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},3755:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>o,pages:()=>x,routeModule:()=>h,tree:()=>d});var a=t(7096),r=t(6132),l=t(7284),i=t.n(l),n=t(2564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["admin",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7777)),"C:\\Cursor Development\\supporthubv2\\app\\admin\\dashboard\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8904)),"C:\\Cursor Development\\supporthubv2\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],x=["C:\\Cursor Development\\supporthubv2\\app\\admin\\dashboard\\page.tsx"],o="/admin/dashboard/page",m={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/dashboard/page",pathname:"/admin/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9537:(e,s,t)=>{Promise.resolve().then(t.bind(t,2270))},2270:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>AdminDashboardPage});var a=t(784),r=t(9885),l=t(7114),i=t(1440),n=t.n(i),c=t(4901),d=t(92),x=t(5256),o=t(5441),m=t(4409),h=t(7),u=t(644),p=t(5574),g=t(9518),j=t(868),y=t(7676);function AdminDashboardPage(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)(null),[i,N]=(0,r.useState)([]),[f,b]=(0,r.useState)([]),[v,w]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[S,P]=(0,r.useState)(""),[_,T]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!(0,j.C5)()){e.push("/admin/login");return}loadDashboardData()},[e]);let loadDashboardData=()=>{T(!0);let e=(0,j.ns)();t(e);let s=(0,y.SP)();N(s),T(!1)},handleBulkStatusUpdate=e=>{if(0===f.length)return;let s=i.map(s=>{if(f.includes(s.id)){let t={...s,status:e};return(0,y.Tw)(t),t}return s});N(s),b([]);let a=(0,j.ns)();t(a)},toggleTicketSelection=e=>{b(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},A=i.filter(e=>{if(v){let s=v.toLowerCase(),t=e.title.toLowerCase().includes(s)||e.description.toLowerCase().includes(s);if(!t)return!1}return(!k||e.status===k)&&(!S||e.priority===S)}),getStatusBadge=e=>{switch(e){case"Open":default:return"status-open";case"In Progress":return"status-progress";case"Closed":return"status-closed"}},getPriorityBadge=e=>{switch(e){case"Low":return"priority-low";case"Medium":default:return"priority-medium";case"High":return"priority-high"}},formatDate=e=>new Date(e).toLocaleDateString("en-AU",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});if(_)return a.jsx("div",{className:"min-h-screen bg-grey-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent"})});let D=(0,j.yK)();return(0,a.jsxs)("div",{className:"min-h-screen bg-grey-50",children:[a.jsx("header",{className:"bg-white shadow-sm border-b border-grey-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-accent rounded-lg flex items-center justify-center mr-3",children:a.jsx(c.Z,{className:"w-5 h-5 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-lg font-semibold text-grey-900",children:"Admin Dashboard"}),a.jsx("p",{className:"text-sm text-grey-600",children:"G'day AI Support Hub"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm text-grey-600",children:["Welcome, ",D?.user?.email]}),a.jsx(n(),{href:"/",className:"btn-outline text-sm",children:"View Site"}),(0,a.jsxs)("button",{onClick:()=>{(0,j.rK)(),e.push("/admin/login")},className:"btn-secondary text-sm flex items-center",children:[a.jsx(d.Z,{className:"w-4 h-4 mr-1"}),"Logout"]})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-accent mr-4",children:a.jsx(x.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-grey-600",children:"Total Tickets"}),a.jsx("p",{className:"text-2xl font-bold text-grey-900",children:s?.totalTickets||0})]})]})}),a.jsx("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-accent mr-4",children:a.jsx(o.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-grey-600",children:"Open Tickets"}),a.jsx("p",{className:"text-2xl font-bold text-grey-900",children:s?.ticketsByStatus.open||0})]})]})}),a.jsx("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-accent mr-4",children:a.jsx(m.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-grey-600",children:"High Priority"}),a.jsx("p",{className:"text-2xl font-bold text-grey-900",children:s?.ticketsByPriority.high||0})]})]})}),a.jsx("div",{className:"card",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-lg bg-accent mr-4",children:a.jsx(h.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-grey-600",children:"New Today"}),a.jsx("p",{className:"text-2xl font-bold text-grey-900",children:s?.recentActivity.newTicketsToday||0})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-grey-900 mb-4",children:"Tickets by Category"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-grey-600",children:"Access Request"}),a.jsx("span",{className:"text-sm font-medium text-grey-900",children:s?.ticketsByCategory.accessRequest||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-grey-600",children:"Technical Issue"}),a.jsx("span",{className:"text-sm font-medium text-grey-900",children:s?.ticketsByCategory.technicalIssue||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-grey-600",children:"General Support"}),a.jsx("span",{className:"text-sm font-medium text-grey-900",children:s?.ticketsByCategory.generalSupport||0})]})]})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-grey-900 mb-4",children:"Status Distribution"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-grey-600",children:"Open"}),a.jsx("span",{className:"text-sm font-medium text-grey-900",children:s?.ticketsByStatus.open||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-grey-600",children:"In Progress"}),a.jsx("span",{className:"text-sm font-medium text-grey-900",children:s?.ticketsByStatus.inProgress||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-grey-600",children:"Closed"}),a.jsx("span",{className:"text-sm font-medium text-grey-900",children:s?.ticketsByStatus.closed||0})]})]})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold text-grey-900 mb-4",children:"Recent Activity"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-grey-600",children:"New Today"}),a.jsx("span",{className:"text-sm font-medium text-grey-900",children:s?.recentActivity.newTicketsToday||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-grey-600",children:"Closed Today"}),a.jsx("span",{className:"text-sm font-medium text-grey-900",children:s?.recentActivity.closedTicketsToday||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-grey-600",children:"Avg Response (hrs)"}),a.jsx("span",{className:"text-sm font-medium text-grey-900",children:s?.recentActivity.averageResponseTime||0})]})]})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-grey-900",children:"Ticket Management"}),a.jsx("p",{className:"text-grey-600",children:"Manage all support tickets with bulk operations"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:loadDashboardData,className:"btn-outline flex items-center",children:[a.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,a.jsxs)("button",{onClick:()=>{let e=JSON.stringify(i,null,2),s="data:application/json;charset=utf-8,"+encodeURIComponent(e),t=`support-tickets-${new Date().toISOString().split("T")[0]}.json`,a=document.createElement("a");a.setAttribute("href",s),a.setAttribute("download",t),a.click()},className:"btn-outline flex items-center",children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2"}),"Export"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[a.jsx("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-grey-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search tickets...",value:v,onChange:e=>w(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-grey-300 rounded-lg focus-ring"})]})}),(0,a.jsxs)("select",{value:k,onChange:e=>C(e.target.value||""),className:"px-3 py-2 border border-grey-300 rounded-lg focus-ring",children:[a.jsx("option",{value:"",children:"All Statuses"}),a.jsx("option",{value:"Open",children:"Open"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Closed",children:"Closed"})]}),(0,a.jsxs)("select",{value:S,onChange:e=>P(e.target.value||""),className:"px-3 py-2 border border-grey-300 rounded-lg focus-ring",children:[a.jsx("option",{value:"",children:"All Priorities"}),a.jsx("option",{value:"Low",children:"Low"}),a.jsx("option",{value:"Medium",children:"Medium"}),a.jsx("option",{value:"High",children:"High"})]})]}),f.length>0&&a.jsx("div",{className:"bg-accent border border-accent-dark rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-black",children:[f.length," ticket(s) selected"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>handleBulkStatusUpdate("Open"),className:"text-sm bg-accent-dark text-white px-3 py-1 rounded hover:bg-accent",children:"Mark Open"}),a.jsx("button",{onClick:()=>handleBulkStatusUpdate("In Progress"),className:"text-sm bg-accent-dark text-white px-3 py-1 rounded hover:bg-accent",children:"Mark In Progress"}),a.jsx("button",{onClick:()=>handleBulkStatusUpdate("Closed"),className:"text-sm bg-accent-dark text-white px-3 py-1 rounded hover:bg-accent",children:"Mark Closed"}),a.jsx("button",{onClick:()=>{if(0!==f.length&&window.confirm(`Are you sure you want to delete ${f.length} ticket(s)?`)){f.forEach(e=>{(0,y.M4)(e)});let e=i.filter(e=>!f.includes(e.id));N(e),b([]);let s=(0,j.ns)();t(s)}},className:"text-sm bg-accent-dark text-white px-3 py-1 rounded hover:bg-accent",children:"Delete"})]})]})}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-grey-200",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-grey-600",children:a.jsx("input",{type:"checkbox",checked:f.length===A.length&&A.length>0,onChange:()=>{let e=A.map(e=>e.id);b(f.length===e.length?[]:e)},className:"rounded border-grey-300 text-accent focus:ring-accent"})}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-grey-600",children:"Title"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-grey-600",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-grey-600",children:"Priority"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-grey-600",children:"Category"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-grey-600",children:"Created"})]})}),a.jsx("tbody",{children:A.map(e=>(0,a.jsxs)("tr",{className:"border-b border-grey-200 hover:bg-grey-50",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsx("input",{type:"checkbox",checked:f.includes(e.id),onChange:()=>toggleTicketSelection(e.id),className:"rounded border-grey-300 text-accent focus:ring-accent"})}),(0,a.jsxs)("td",{className:"py-3 px-4",children:[a.jsx("div",{className:"font-medium text-grey-900",children:e.title}),a.jsx("div",{className:"text-sm text-grey-600 truncate max-w-xs",children:e.description})]}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`${getStatusBadge(e.status)}`,children:e.status})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`${getPriorityBadge(e.priority)}`,children:e.priority})}),a.jsx("td",{className:"py-3 px-4 text-sm text-grey-600",children:e.category}),a.jsx("td",{className:"py-3 px-4 text-sm text-grey-600",children:formatDate(e.createdDate)})]},e.id))})]})}),0===A.length&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-grey-600",children:"No tickets found matching your criteria."})})]})]})]})}},7777:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>c});var a=t(5153);let r=(0,a.createProxy)(String.raw`C:\Cursor Development\supporthubv2\app\admin\dashboard\page.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,c=n}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[717,17,432,379,868],()=>__webpack_exec__(3755));module.exports=t})();