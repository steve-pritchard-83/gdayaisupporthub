(()=>{var e={};e.id=427,e.ids=[427],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},7310:e=>{"use strict";e.exports=require("url")},3755:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>d});var a=t(7096),r=t(6132),l=t(7284),i=t.n(l),c=t(2564),n={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>c[e]);t.d(s,n);let d=["",{children:["admin",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7777)),"C:\\Cursor Development\\supporthubv2\\app\\admin\\dashboard\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4851)),"C:\\Cursor Development\\supporthubv2\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Cursor Development\\supporthubv2\\app\\admin\\dashboard\\page.tsx"],m="/admin/dashboard/page",x={require:t,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/dashboard/page",pathname:"/admin/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9537:(e,s,t)=>{Promise.resolve().then(t.bind(t,2270))},2270:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>AdminDashboardPage});var a=t(784),r=t(9885),l=t(7114),i=t(1440),c=t.n(i),n=t(4901),d=t(92),o=t(5256),m=t(5441),x=t(4409),h=t(7),u=t(644),p=t(5574),j=t(9518),y=t(868),N=t(7676);function AdminDashboardPage(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)(null),[i,g]=(0,r.useState)([]),[b,f]=(0,r.useState)([]),[v,w]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[P,S]=(0,r.useState)(""),[_,D]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!(0,y.C5)()){e.push("/admin/login");return}loadDashboardData()},[e]);let loadDashboardData=()=>{D(!0);let e=(0,y.ns)();t(e);let s=(0,N.SP)();g(s),D(!1)},handleBulkStatusUpdate=e=>{if(0===b.length)return;let s=i.map(s=>{if(b.includes(s.id)){let t={...s,status:e};return(0,N.Tw)(t),t}return s});g(s),f([])},toggleTicketSelection=e=>{f(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},A=i.filter(e=>(!v||!!e.title.toLowerCase().includes(v.toLowerCase())||!!e.description.toLowerCase().includes(v.toLowerCase()))&&(!k||e.status===k)&&(!P||e.priority===P)),getStatusBadge=e=>{switch(e){case"Open":default:return"status-open";case"In Progress":return"status-progress";case"Closed":return"status-closed"}},getPriorityBadge=e=>{switch(e){case"High":return"priority-high";case"Medium":default:return"priority-medium";case"Low":return"priority-low"}},formatDate=e=>new Date(e).toLocaleDateString("en-AU",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});if(_)return a.jsx("div",{className:"flex justify-center items-center min-h-screen bg-primary",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-accent"})});let T=(0,y.yK)();return(0,a.jsxs)("div",{className:"min-h-screen bg-primary",children:[a.jsx("header",{className:"bg-surface shadow-xl border-b border-primary",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-8 h-8 bg-accent rounded-lg flex items-center justify-center mr-3",children:a.jsx(n.Z,{className:"w-5 h-5 text-black"})}),(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-lg font-semibold text-primary",children:"Admin Dashboard"}),a.jsx("p",{className:"text-sm text-secondary",children:"G'day AI Support Hub"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-sm text-secondary",children:["Welcome, ",T?.user?.email]}),a.jsx(c(),{href:"/",className:"btn-outline text-sm",children:"View Site"}),(0,a.jsxs)("button",{onClick:()=>{(0,y.rK)(),e.push("/admin/login")},className:"btn-secondary text-sm flex items-center",children:[a.jsx(d.Z,{className:"w-4 h-4 mr-1"}),"Logout"]})]})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 fade-in",children:[a.jsx("div",{className:"card-compact",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-xl bg-accent mr-4",children:a.jsx(o.Z,{className:"w-6 h-6 text-black"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-secondary",children:"Total Reports"}),a.jsx("p",{className:"text-2xl font-bold text-primary",children:s?.totalTickets||0})]})]})}),a.jsx("div",{className:"card-compact",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-xl bg-red-500 mr-4",children:a.jsx(m.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-secondary",children:"Open Reports"}),a.jsx("p",{className:"text-2xl font-bold text-primary",children:s?.ticketsByStatus.open||0})]})]})}),a.jsx("div",{className:"card-compact",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-xl bg-orange-500 mr-4",children:a.jsx(x.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-secondary",children:"High Priority"}),a.jsx("p",{className:"text-2xl font-bold text-primary",children:s?.ticketsByPriority.high||0})]})]})}),a.jsx("div",{className:"card-compact",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-xl bg-green-500 mr-4",children:a.jsx(h.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-secondary",children:"New Today"}),a.jsx("p",{className:"text-2xl font-bold text-primary",children:s?.recentActivity.newTicketsToday||0})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"card-compact",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:"Reports by Category"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-secondary",children:"Bug Reports"}),a.jsx("span",{className:"text-sm font-medium text-primary",children:i.filter(e=>"Bug Report"===e.category).length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-secondary",children:"Feature Requests"}),a.jsx("span",{className:"text-sm font-medium text-primary",children:i.filter(e=>"Feature Request"===e.category).length})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-secondary",children:"Access Requests"}),a.jsx("span",{className:"text-sm font-medium text-primary",children:s?.ticketsByCategory.accessRequest||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-secondary",children:"General Support"}),a.jsx("span",{className:"text-sm font-medium text-primary",children:s?.ticketsByCategory.generalSupport||0})]})]})]}),(0,a.jsxs)("div",{className:"card-compact",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:"Status Distribution"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-secondary",children:"Open"}),a.jsx("span",{className:"text-sm font-medium text-primary",children:s?.ticketsByStatus.open||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-secondary",children:"In Progress"}),a.jsx("span",{className:"text-sm font-medium text-primary",children:s?.ticketsByStatus.inProgress||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-secondary",children:"Closed"}),a.jsx("span",{className:"text-sm font-medium text-primary",children:s?.ticketsByStatus.closed||0})]})]})]}),(0,a.jsxs)("div",{className:"card-compact",children:[a.jsx("h3",{className:"text-lg font-semibold text-primary mb-4",children:"Recent Activity"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-secondary",children:"New Today"}),a.jsx("span",{className:"text-sm font-medium text-primary",children:s?.recentActivity.newTicketsToday||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-secondary",children:"Closed Today"}),a.jsx("span",{className:"text-sm font-medium text-primary",children:s?.recentActivity.closedTicketsToday||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm text-secondary",children:"Avg Response (hrs)"}),a.jsx("span",{className:"text-sm font-medium text-primary",children:s?.recentActivity.averageResponseTime||0})]})]})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-primary",children:"Report Management"}),a.jsx("p",{className:"text-secondary",children:"Manage all bug reports and feature requests with bulk operations"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{onClick:loadDashboardData,className:"btn-secondary flex items-center",children:[a.jsx(u.Z,{className:"w-4 h-4 mr-2"}),"Refresh"]}),(0,a.jsxs)("button",{onClick:()=>{let e="data:text/csv;charset=utf-8,ID,Title,Status,Priority,Category,Email,Created\n"+i.map(e=>`${e.id},"${e.title}",${e.status},${e.priority},${e.category},${e.email},${e.createdDate}`).join("\n"),s=encodeURI(e),t=document.createElement("a");t.setAttribute("href",s),t.setAttribute("download","tickets-export.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"btn-secondary flex items-center",children:[a.jsx(p.Z,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex-1 search-container",children:[a.jsx("input",{type:"text",placeholder:"Search reports...",value:v,onChange:e=>w(e.target.value),className:"search-input"}),a.jsx(j.Z,{className:"search-icon w-4 h-4"})]}),(0,a.jsxs)("select",{value:k,onChange:e=>C(e.target.value||""),className:"form-select",children:[a.jsx("option",{value:"",children:"All Statuses"}),a.jsx("option",{value:"Open",children:"Open"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Closed",children:"Closed"})]}),(0,a.jsxs)("select",{value:P,onChange:e=>S(e.target.value||""),className:"form-select",children:[a.jsx("option",{value:"",children:"All Priorities"}),a.jsx("option",{value:"Low",children:"Low"}),a.jsx("option",{value:"Medium",children:"Medium"}),a.jsx("option",{value:"High",children:"High"})]})]}),b.length>0&&a.jsx("div",{className:"alert-attention-dark mb-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-primary",children:[b.length," report(s) selected"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>handleBulkStatusUpdate("Open"),className:"btn-small",children:"Mark Open"}),a.jsx("button",{onClick:()=>handleBulkStatusUpdate("In Progress"),className:"btn-small",children:"Mark In Progress"}),a.jsx("button",{onClick:()=>handleBulkStatusUpdate("Closed"),className:"btn-small",children:"Mark Closed"}),a.jsx("button",{onClick:()=>{if(0===b.length)return;let e=window.confirm(`Are you sure you want to delete ${b.length} ticket(s)?`);e&&(b.forEach(e=>{(0,N.M4)(e)}),g(i.filter(e=>!b.includes(e.id))),f([]))},className:"btn-small-secondary text-red-400 hover:text-red-300",children:"Delete"})]})]})}),a.jsx("div",{className:"table-modern",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"table-header",children:a.jsx("input",{type:"checkbox",checked:b.length===A.length&&A.length>0,onChange:()=>{f(b.length===A.length?[]:A.map(e=>e.id))},className:"rounded border-dark-border text-accent focus:ring-accent"})}),a.jsx("th",{className:"table-header",children:"Title"}),a.jsx("th",{className:"table-header",children:"Status"}),a.jsx("th",{className:"table-header",children:"Priority"}),a.jsx("th",{className:"table-header",children:"Category"}),a.jsx("th",{className:"table-header",children:"Email"}),a.jsx("th",{className:"table-header",children:"Created"})]})}),a.jsx("tbody",{children:A.map(e=>(0,a.jsxs)("tr",{className:"table-row",children:[a.jsx("td",{className:"table-cell",children:a.jsx("input",{type:"checkbox",checked:b.includes(e.id),onChange:()=>toggleTicketSelection(e.id),className:"rounded border-dark-border text-accent focus:ring-accent"})}),(0,a.jsxs)("td",{className:"table-cell",children:[a.jsx("div",{className:"font-medium text-primary",children:e.title}),a.jsx("div",{className:"text-sm text-secondary truncate max-w-xs",children:e.description})]}),a.jsx("td",{className:"table-cell",children:a.jsx("span",{className:`${getStatusBadge(e.status)}`,children:e.status})}),a.jsx("td",{className:"table-cell",children:a.jsx("span",{className:`${getPriorityBadge(e.priority)}`,children:e.priority})}),a.jsx("td",{className:"table-cell text-sm text-secondary",children:e.category}),a.jsx("td",{className:"table-cell text-sm text-secondary",children:e.email}),a.jsx("td",{className:"table-cell text-sm text-secondary",children:formatDate(e.createdDate)})]},e.id))})]})}),0===A.length&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-secondary",children:"No reports found matching your criteria."})})]})]})]})}},7777:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>n});var a=t(5153);let r=(0,a.createProxy)(String.raw`C:\Cursor Development\supporthubv2\app\admin\dashboard\page.tsx`),{__esModule:l,$$typeof:i}=r,c=r.default,n=c}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[95,17,786,379,868],()=>__webpack_exec__(3755));module.exports=t})();